# Миграция на reCAPTCHA Enterprise (Score-based)

## Проблема
Ранее использовался код для **Checkbox** (V2) ключа, который пытался отрисовать видимый виджет ("Я не робот").
Однако текущий ключ `6LfiAhMsAAAAAJZ60cGtcDDTFMVchXhPtbYQ25x8` является **Score-based** (V3 / Enterprise) ключом.
Попытка отрисовать его как виджет приводила к ошибке "ОШИБКА: неверный ключ" (Invalid key type).

## Решение
Код был обновлен в соответствии с документацией Google Cloud Console для Score-based ключей:

1. **Удален виджет**: Компонент `<div className="g-recaptcha">` удален из формы, так как проверка должна быть невидимой.
2. **Метод execute**: Вместо `render()` теперь используется `grecaptcha.enterprise.execute()` при отправке формы.
3. **Загрузка скрипта**: URL скрипта обновлен для включения `render=SITE_KEY` параметров.
4. **Backend**: Обновлена проверка токена на сервере, `expectedAction` установлен в `submit_form` для соответствия фронтенду.

## Как это работает теперь
1. Пользователь заполняет форму.
2. При нажатии "Отправить", сайт невидимо обращается к Google:
   ```js
   await grecaptcha.enterprise.execute('KEY', { action: 'submit_form' })
   ```
3. Google возвращает токен.
4. Токен отправляется на сервер вместе с данными формы.
5. Сервер проверяет токен и получает оценку (score) от 0.0 до 1.0.

## Важные шаги для администратора
1. Убедиться, что деплой на Render завершен.
2. Очистить кэш браузера.
3. Убедиться, что переменная окружения `RECAPTCHA_API_KEY` установлена в Bot Service на Render.

