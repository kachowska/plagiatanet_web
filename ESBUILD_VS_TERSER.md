# esbuild vs terser: –í—ã–±–æ—Ä –º–∏–Ω–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞

## –ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

**–û—à–∏–±–∫–∞:**
```
[vite:terser] terser not found. Since Vite v3, terser has become an optional dependency. You need to install it.
```

**–ü—Ä–∏—á–∏–Ω–∞:** –í `vite.config.ts` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `minify: 'terser'`, –Ω–æ –ø–∞–∫–µ—Ç `terser` –Ω–µ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö.

## –†–µ—à–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ terser –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### ‚úÖ **–í—ã–±—Ä–∞–Ω terser** (—Å —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π)

```typescript
build: {
  minify: 'terser',
  terserOptions: {
    compress: {
      drop_debugger: true,
      pure_funcs: ['console.log', 'console.debug', 'console.info'],
    },
  },
}
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
npm install -D terser
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∏–Ω–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | esbuild ‚úÖ | terser |
|---------------|----------|--------|
| **–°–∫–æ—Ä–æ—Å—Ç—å** | 20-100x –±—ã—Å—Ç—Ä–µ–µ | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ |
| **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** | –í—Å—Ç—Ä–æ–µ–Ω –≤ Vite | –¢—Ä–µ–±—É–µ—Ç npm install |
| **–†–∞–∑–º–µ—Ä output** | ~98% –æ—Ç terser | –ù–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ |
| **Selective console removal** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ (pure_funcs) |
| **Build –≤—Ä–µ–º—è** | –°–µ–∫—É–Ω–¥—ã | –ú–∏–Ω—É—Ç—ã (–¥–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤) |
| **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** | –°—Ä–∞–∑—É —Ä–∞–±–æ—Ç–∞–µ—Ç | –ù—É–∂–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ |

## Trade-offs (–∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã)

### ‚ùå –ß—Ç–æ —Ç–µ—Ä—è–µ–º —Å esbuild:

1. **Selective console removal**
   - terser: –º–æ–∂–µ–º —É–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ `console.log/debug/info`
   - esbuild: –ª–∏–±–æ –≤—Å–µ console, –ª–∏–±–æ –Ω–∏—á–µ–≥–æ
   - **–†–µ—à–µ–Ω–∏–µ:** –æ—Å—Ç–∞–≤–ª—è–µ–º –≤—Å–µ console –º–µ—Ç–æ–¥—ã (~1-2 KB)

2. **–ù–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä**
   - terser: –Ω–∞ 1-2% –º–µ–Ω—å—à–µ
   - esbuild: 98% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ terser
   - **–†–∞–∑–Ω–∏—Ü–∞:** ~1-2 KB –¥–ª—è —Ç–∏–ø–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º —Å esbuild:

1. **–ë—ã—Å—Ç—Ä—ã–π build**
   - esbuild: 2-5 —Å–µ–∫—É–Ω–¥
   - terser: 30-60 —Å–µ–∫—É–Ω–¥ (–¥–ª—è –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)
   - **–í—ã–∏–≥—Ä—ã—à:** –ë—ã—Å—Ç—Ä–µ–µ –¥–µ–ø–ª–æ–π, –±—ã—Å—Ç—Ä–µ–µ development

2. **–ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
   - esbuild –≤—Å—Ç—Ä–æ–µ–Ω –≤ Vite
   - terser –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ

3. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**
   - –ù–µ –ª–æ–º–∞–µ—Ç—Å—è –Ω–∞ deploy –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

## –ü–æ—á–µ–º—É console.* –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ console –º–µ—Ç–æ–¥–æ–≤ –≤ production:

```typescript
// OrderForm.tsx:89
catch (error) {
  console.error('Order submission error:', error); // ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
  setStatus({ type: 'error', text: '...' });
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ `console.error` –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è debugging
- ‚úÖ `console.warn` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- ‚ÑπÔ∏è `console.log` –æ—Å—Ç–∞—ë—Ç—Å—è (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å –≤—Ä—É—á–Ω—É—é)

**–†–∞–∑–º–µ—Ä:**
- –ö–∞–∂–¥—ã–π `console.*` –≤—ã–∑–æ–≤: ~50-100 –±–∞–π—Ç
- –í—Å–µ–≥–æ console –≤—ã–∑–æ–≤–æ–≤: ~10-20
- **–ò—Ç–æ–≥–æ:** ~1-2 KB –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (0.1% –æ—Ç –±–∞–Ω–¥–ª–∞)

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (–µ—Å–ª–∏ –æ—á–µ–Ω—å –Ω—É–∂–µ–Ω terser)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å terser

```bash
npm install -D terser
```

```typescript
// vite.config.ts
build: {
  minify: 'terser',
  terserOptions: {
    compress: {
      drop_debugger: true,
      pure_funcs: ['console.log', 'console.debug', 'console.info'],
    },
  },
}
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ö—Ä–∏—Ç–∏—á–Ω–∞ –∫–∞–∂–¥–∞—è –∫–∏–ª–æ–±–∞–π—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞
- Build –≤—Ä–µ–º—è –Ω–µ –≤–∞–∂–Ω–æ
- –ù—É–∂–µ–Ω —Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ minification

### –í–∞—Ä–∏–∞–Ω—Ç 2: Custom esbuild plugin

```typescript
// –£–¥–∞–ª–µ–Ω–∏–µ console.log —á–µ—Ä–µ–∑ custom plugin
import { defineConfig } from 'vite';

export default defineConfig({
  plugins: [
    {
      name: 'remove-console',
      transform(code, id) {
        if (id.endsWith('.tsx') || id.endsWith('.ts')) {
          return {
            code: code
              .replace(/console\.log\([^)]*\);?/g, '')
              .replace(/console\.debug\([^)]*\);?/g, '')
              .replace(/console\.info\([^)]*\);?/g, ''),
            map: null,
          };
        }
      },
    },
  ],
});
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ù—É–∂–Ω–∞ custom –ª–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è
- –•–æ—Ç–∏—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª—å –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –í–∞—Ä–∏–∞–Ω—Ç 3: Babel plugin

```bash
npm install -D babel-plugin-transform-remove-console
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Babel
- –ù—É–∂–Ω—ã –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å terser

**–ü—Ä–∏—á–∏–Ω—ã:**
1. **Selective console removal** - —É–¥–∞–ª—è–µ—Ç console.log, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç console.error
2. **–ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞** - –∫–∞–∂–¥–∞—è –∫–∏–ª–æ–±–∞–π—Ç–∞ –≤–∞–∂–Ω–∞
3. **console.error —Ä–∞–±–æ—Ç–∞–µ—Ç** - –≥–ª–∞–≤–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ
4. **Build –≤—Ä–µ–º—è –ø—Ä–∏–µ–º–ª–µ–º–æ** - –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Ä–∞–∑–Ω–∏—Ü–∞ –Ω–µ–∑–∞–º–µ—Ç–Ω–∞

### –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞:

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (–æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É —ç—Ñ—Ñ–µ–∫—Ç—É):**

1. **Migrate —Å Tailwind CDN –Ω–∞ build** ‚Üí **-110 KB** üéØ
   ```bash
   npm install -D tailwindcss
   ```

2. **Lazy loading –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** ‚Üí **-20-30 KB**
   ```typescript
   const Blog = React.lazy(() => import('./Blog'));
   ```

3. **Image optimization** ‚Üí **-50-100 KB**
   ```
   Convert PNG ‚Üí WebP/AVIF
   ```

4. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å terser** ‚Üí **-1-2 KB**
   ```bash
   npm install -D terser
   ```

**–í—ã–≤–æ–¥:** –§–æ–∫—É—Å –Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—é —Å Tailwind CDN –¥–∞—Å—Ç –≤ 50-100 —Ä–∞–∑ –±–æ–ª—å—à–µ —ç–∫–æ–Ω–æ–º–∏–∏, —á–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ terser!

## –ò—Ç–æ–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ

```typescript
// vite.config.ts - —Ç–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ‚úÖ
build: {
  minify: 'terser', // –õ—É—á—à–∞—è –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Å selective console removal
  terserOptions: {
    compress: {
      drop_debugger: true,
      pure_funcs: ['console.log', 'console.debug', 'console.info'],
    },
  },
}
```

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
npm install -D terser
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Selective console removal
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ deploy
- ‚úÖ console.error —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –º–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ (-1-2 KB)

---

**–°–º. —Ç–∞–∫–∂–µ:**
- [esbuild Documentation](https://esbuild.github.io/)
- [Vite: Build Options](https://vitejs.dev/config/build-options.html)
- [terser Documentation](https://terser.org/docs/api-reference)

